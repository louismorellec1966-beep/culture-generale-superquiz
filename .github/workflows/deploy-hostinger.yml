name: ðŸš€ DÃ©ploiement vers Hostinger

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  deploy:
    name: ðŸ“¤ Upload vers Hostinger
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ RÃ©cupÃ©rer le code
        uses: actions/checkout@v4

      - name: ðŸ“¤ DÃ©ployer via lftp
        run: |
          sudo apt-get update && sudo apt-get install -y lftp
          lftp -e "
            set ssl:verify-certificate no;
            set ftp:ssl-allow yes;
            set ftp:ssl-force yes;
            set ftp:ssl-protect-data yes;
            open -u ${{ secrets.FTP_USER }},${{ secrets.FTP_PASSWORD }} ${{ secrets.FTP_HOST }};
            mirror -R --exclude .git/ --exclude .github/ --exclude deploy.ps1 --exclude deploy.bat --exclude _netrc --exclude node_modules/ . /domains/cultureludo.com/public_html/;
            quit
          "
