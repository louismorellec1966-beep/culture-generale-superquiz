<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CultureLudo - Le quiz de culture gÃ©nÃ©rale fun et addictif. Testez vos connaissances, dÃ©fiez vos amis et grimpez dans le classement !">
    <title>CultureLudo - Quiz de Culture GÃ©nÃ©rale</title>

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="Images/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="Images/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="Images/logo-192.png">

    <!-- Preconnect pour performance -->
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
    <link rel="preconnect" href="https://firestore.googleapis.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.gstatic.com">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cultureludo.com/">
    <meta property="og:title" content="CultureLudo - Quiz de Culture GÃ©nÃ©rale">
    <meta property="og:description" content="Le quiz de culture gÃ©nÃ©rale fun et addictif. Testez vos connaissances, dÃ©fiez vos amis et grimpez dans le classement !">
    <meta property="og:image" content="Images/logo-512.png">
    <meta property="og:locale" content="fr_FR">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://cultureludo.com/">
    <meta name="twitter:title" content="CultureLudo - Quiz de Culture GÃ©nÃ©rale">
    <meta name="twitter:description" content="Le quiz de culture gÃ©nÃ©rale fun et addictif. Testez vos connaissances, dÃ©fiez vos amis et grimpez dans le classement !">
    <meta name="twitter:image" content="Images/logo-512.png">

    <!-- SEO supplÃ©mentaire -->
    <meta name="keywords" content="quiz, culture gÃ©nÃ©rale, jeu, Ã©ducation, apprentissage, trivia, questions">
    <meta name="author" content="CultureLudo">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://cultureludo.com/">

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-G3YEKJLDRT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-G3YEKJLDRT');
    </script>
</head>

<body class="home-page">
    <!-- Skip link pour accessibilitÃ© -->
    <a href="#main-content" class="skip-link">Aller au contenu principal</a>

    <!-- BanniÃ¨re Beta Test -->
    <div class="beta-banner">
        <div class="beta-content">
            <span class="beta-badge">ğŸš§ BETA</span>
            <p class="beta-text">
                <strong>Site en phase de test !</strong> Des bugs peuvent survenir.
                <a href="avis.html" class="beta-link">Signalez-les ici â†’</a>
            </p>
            <button class="beta-close" onclick="closeBetaBanner()" aria-label="Fermer">Ã—</button>
        </div>
    </div>

    <!-- Hero Section -->
    <main id="main-content">
    <section class="hero" role="banner">
        <div class="hero-content">
            <h1>ğŸ§  CultureLudi</h1>
            <p class="hero-subtitle">Devenez incollable en culture gÃ©nÃ©rale !</p>
            
            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-number">1000+</div>
                    <div class="stat-label">Questions</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">12</div>
                    <div class="stat-label">CatÃ©gories</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">âˆ</div>
                    <div class="stat-label">Fun</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quiz du Jour -->
    <section class="daily-quiz-section">
        <div class="daily-quiz-card">
            <span class="daily-badge">â­ Nouveau chaque jour</span>
            <h2>Quiz du Jour</h2>
            <p class="daily-theme" id="daily-theme-home">Chargement du thÃ¨me...</p>
            <a href="quiz-du-jour.html" class="btn-play">
                Jouer maintenant
                <span>ğŸ¯</span>
            </a>
        </div>
    </section>

    <!-- Modes de jeu -->
    <section class="game-modes" aria-labelledby="modes-title">
        <h2 class="section-title" id="modes-title">Choisissez votre mode de jeu</h2>
        <div class="modes-grid">
            <a href="Quiz.html" class="mode-card featured">
                <span class="mode-icon">ğŸ®</span>
                <h3>Quiz Classique</h3>
                <p>Choisissez une catÃ©gorie et testez vos connaissances Ã  votre rythme</p>
            </a>
            <a href="multiplayer.html" class="mode-card">
                <span class="mode-icon">âš”ï¸</span>
                <h3>Mode Duel</h3>
                <p>Affrontez un ami en temps rÃ©el et prouvez que vous Ãªtes le meilleur !</p>
            </a>
            <a href="mode-survie.html" class="mode-card">
                <span class="mode-icon">ğŸ’€</span>
                <h3>Mode Survie</h3>
                <p>Combien de questions pouvez-vous enchaÃ®ner sans vous tromper ?</p>
            </a>
            <a href="tournois.html" class="mode-card">
                <span class="mode-icon">ğŸ†</span>
                <h3>Tournois</h3>
                <p>Participez aux compÃ©titions hebdomadaires et gagnez des rÃ©compenses !</p>
            </a>
            <a href="clubs.html" class="mode-card">
                <span class="mode-icon">ğŸ°</span>
                <h3>Clubs</h3>
                <p>Rejoignez un club et progressez en Ã©quipe avec d'autres joueurs !</p>
            </a>
            <a href="revision.html" class="mode-card">
                <span class="mode-icon">ğŸ“š</span>
                <h3>RÃ©vision</h3>
                <p>Revoyez les questions que vous avez ratÃ©es et progressez !</p>
            </a>
            <a href="quiz-perso.html" class="mode-card">
                <span class="mode-icon">ğŸ¨</span>
                <h3>Quiz Perso</h3>
                <p>CrÃ©ez vos propres quiz et jouez Ã  ceux de la communautÃ© !</p>
            </a>
        </div>
    </section>

    <!-- CatÃ©gories -->
    <section class="categories-section" aria-labelledby="categories-title">
        <h2 class="section-title" id="categories-title">Explorez les catÃ©gories</h2>
        <div class="categories-scroll">
            <a href="Histoire.html" class="category-chip">ğŸ“œ Histoire</a>
            <a href="GÃ©ographie.html" class="category-chip">ğŸŒ GÃ©ographie</a>
            <a href="Science.html" class="category-chip">ğŸ”¬ Sciences</a>
            <a href="Art.html" class="category-chip">ğŸ¨ Art</a>
            <a href="Musique.html" class="category-chip">ğŸµ Musique</a>
            <a href="CinÃ©ma.html" class="category-chip">ğŸ¬ CinÃ©ma</a>
            <a href="LittÃ©rature.html" class="category-chip">ğŸ“š LittÃ©rature</a>
            <a href="Sport.html" class="category-chip">âš½ Sport</a>
            <a href="Gastronomie.html" class="category-chip">ğŸ½ï¸ Gastronomie</a>
            <a href="Philosophie.html" class="category-chip">ğŸ’­ Philosophie</a>
            <a href="Politique.html" class="category-chip">ğŸ›ï¸ Politique</a>
        </div>
    </section>

    <!-- Section Utilisateur -->
    <section class="user-section">
        <div class="user-card" id="user-welcome">
            <h2>ğŸš€ PrÃªt Ã  jouer ?</h2>
            <p>CrÃ©ez un compte gratuit pour sauvegarder vos scores, suivre vos progrÃ¨s et dÃ©fier vos amis !</p>
            <div class="btn-group">
                <a href="Auth.html" class="btn-primary">CrÃ©er un compte</a>
                <a href="Quiz.html" class="btn-secondary">Jouer sans compte</a>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="features-section">
        <div class="features-grid">
            <div class="feature-item">
                <div class="feature-icon">ğŸ“±</div>
                <h4>100% Mobile</h4>
                <p>Jouez partout, sur tous vos appareils</p>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ”„</div>
                <h4>Mis Ã  jour</h4>
                <p>Nouvelles questions rÃ©guliÃ¨rement</p>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ…</div>
                <h4>Progression</h4>
                <p>Suivez vos stats et amÃ©liorez-vous</p>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ¯</div>
                <h4>Quiz du jour</h4>
                <p>Un nouveau dÃ©fi quotidien</p>
            </div>
        </div>
    </section>

    </main>

    <!-- Footer -->
    <footer class="home-footer" role="contentinfo">
        <nav aria-label="Liens du pied de page">
            <a href="avis.html">Avis & Bugs</a>
            <a href="Contact.html">Contact</a>
            <a href="Mentions-Legales.html">Mentions lÃ©gales</a>
            <a href="Politique-Confidentialite.html">ConfidentialitÃ©</a>
        </nav>
        <p style="margin-top: 15px;" id="copyright"></p>
    </footer>

    <!-- Scripts Firebase (chargÃ©s une seule fois) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    
    <!-- Scripts application -->
    <script src="js/menu.js"></script>
    <script src="js/script.js"></script>
    <script src="js/streaks-system.js"></script>
    <script src="js/seasons-system.js"></script>
    <script src="js/themes-system.js"></script>

    <script>
        // Attendre que Firebase soit prÃªt
        function waitForFirebase(callback) {
            if (typeof firebase !== 'undefined' && typeof window.db !== 'undefined' && window.db) {
                console.log('âœ… Firebase et db sont prÃªts');
                callback();
            } else {
                console.log('â³ Attente de Firebase...');
                setTimeout(() => waitForFirebase(callback), 100);
            }
        }

        // Afficher le thÃ¨me du jour
        window.addEventListener('load', () => {
            waitForFirebase(async () => {
                const today = new Date().toISOString().split('T')[0];
                try {
                    const quizDoc = await window.db.collection('dailyQuiz').doc(today).get();

                    if (quizDoc.exists) {
                        document.getElementById('daily-theme-home').textContent =
                            `ThÃ¨me du jour : ${quizDoc.data().theme}`;
                    } else {
                        document.getElementById('daily-theme-home').textContent =
                            `Un nouveau quiz vous attend !`;
                    }
                } catch (e) {
                    document.getElementById('daily-theme-home').textContent =
                        `Un nouveau quiz vous attend !`;
                }

                // Mettre Ã  jour la section utilisateur si connectÃ©
                firebase.auth().onAuthStateChanged(async (user) => {
                    if (user) {
                        await updateUserSection(user);
                    }
                });
            });
        });

        // Mettre Ã  jour la section utilisateur connectÃ©
        async function updateUserSection(user) {
            const userCard = document.getElementById('user-welcome');
            if (!userCard) return;
            
            try {
                const profileDoc = await window.db.collection('profiles').doc(user.uid).get();
                const profile = profileDoc.data() || {};

                // Widget streak
                let streakWidget = '';
                if (typeof StreaksSystem !== 'undefined') {
                    try {
                        const streakInfo = await StreaksSystem.getStreakInfo(user.uid);
                        if (streakInfo && streakInfo.currentStreak > 0) {
                            const flameLevel = StreaksSystem.getFlameLevel(streakInfo.currentStreak);
                            streakWidget = `
                                <div style="
                                    background: linear-gradient(135deg, #ff6b35, #f7931e);
                                    padding: 15px 25px;
                                    border-radius: 12px;
                                    display: inline-flex;
                                    align-items: center;
                                    gap: 10px;
                                    margin-bottom: 20px;
                                ">
                                    <span style="font-size: 1.5em;">${flameLevel}</span>
                                    <span style="font-weight: bold;">SÃ©rie de ${streakInfo.currentStreak} jour${streakInfo.currentStreak > 1 ? 's' : ''} !</span>
                                </div>
                            `;
                        }
                    } catch (e) {
                        console.log('Streak non disponible');
                    }
                }

                // Widget saison
                let seasonWidget = '';
                if (typeof SeasonsSystem !== 'undefined') {
                    try {
                        const season = SeasonsSystem.getCurrentSeason();
                        const userRank = await SeasonsSystem.getUserSeasonRank(user.uid);
                        
                        seasonWidget = `
                            <div style="
                                background: ${season.color}22;
                                border: 2px solid ${season.color};
                                padding: 15px 25px;
                                border-radius: 12px;
                                display: inline-flex;
                                align-items: center;
                                gap: 10px;
                                margin-bottom: 20px;
                            ">
                                <span style="font-size: 1.5em;">${season.emoji}</span>
                                <span>Saison ${season.name}</span>
                                ${userRank ? `<span style="font-weight: bold;">â€¢ #${userRank.position} (${userRank.points} pts)</span>` : ''}
                            </div>
                        `;
                    } catch (e) {
                        console.log('Saison non disponible');
                    }
                }

                userCard.innerHTML = `
                    <h2>ğŸ‘‹ Bienvenue, ${profile.pseudo || profile.username || user.displayName || 'Joueur'} !</h2>
                    ${streakWidget}
                    ${seasonWidget}
                    <p style="margin: 15px 0;">
                        Niveau ${profile.niveau || 1} â€¢ ${profile.experiencePoints || profile.xp || 0} XP â€¢ ${profile.stats?.totalQuiz || profile.quizJoues || 0} quiz jouÃ©s
                    </p>
                    <div class="btn-group">
                        <a href="Quiz.html" class="btn-primary">Jouer maintenant</a>
                        <a href="Profil.html" class="btn-secondary">Mon profil</a>
                        <a href="parametres.html" class="btn-secondary">âš™ï¸ ParamÃ¨tres</a>
                    </div>
                `;
            } catch (error) {
                console.error('Erreur mise Ã  jour section utilisateur:', error);
            }
        }

        // Gestion de la banniÃ¨re beta
        function closeBetaBanner() {
            const banner = document.querySelector('.beta-banner');
            if (banner) {
                banner.classList.add('hidden');
                document.body.classList.remove('beta-visible');
                localStorage.setItem('betaBannerClosed', 'true');
            }
        }

        // VÃ©rifier si la banniÃ¨re a Ã©tÃ© fermÃ©e
        document.addEventListener('DOMContentLoaded', function() {
            const betaClosed = localStorage.getItem('betaBannerClosed');
            const banner = document.querySelector('.beta-banner');

            if (betaClosed === 'true' && banner) {
                banner.classList.add('hidden');
            } else if (banner) {
                document.body.classList.add('beta-visible');
            }
        });

        // Gestion du menu mobile
        document.addEventListener('DOMContentLoaded', function() {
            // Copyright dynamique
            const copyrightEl = document.getElementById('copyright');
            if (copyrightEl) {
                copyrightEl.textContent = `Â© ${new Date().getFullYear()} CultureLudo - Tous droits rÃ©servÃ©s`;
            }

            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            const mobileMenuClose = document.getElementById('mobile-menu-close');

            if (mobileMenuBtn && mobileMenuOverlay) {
                mobileMenuBtn.addEventListener('click', () => {
                    mobileMenuOverlay.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });

                if (mobileMenuClose) {
                    mobileMenuClose.addEventListener('click', () => {
                        mobileMenuOverlay.classList.remove('active');
                        document.body.style.overflow = '';
                    });
                }

                mobileMenuOverlay.addEventListener('click', (e) => {
                    if (e.target === mobileMenuOverlay) {
                        mobileMenuOverlay.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                });
            }
        });
    </script>
</body>

</html>