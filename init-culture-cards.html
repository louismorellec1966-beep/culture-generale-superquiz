<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initialisation des fiches culture</title>
    <!-- Firebase SDK -->
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script defer src="firebase-config.js"></script>
</head>
<body>
    <h1>Initialisation des fiches culture</h1>
    <button onclick="initializeCultureCards()">Ajouter des fiches culture d'exemple</button>
    <div id="status"></div>

    <script>
        // Attendre que Firebase soit chargé
        window.addEventListener('load', () => {
            setTimeout(() => {
                initializeCultureCards();
            }, 2000);
        });

        async function initializeCultureCards() {
            const status = document.getElementById('status');
            status.textContent = 'Initialisation en cours...';

            try {
                // Exemples de fiches culture
                const cultureCards = [
                    {
                        id: 'histoire_antiquite_auguste',
                        titre: 'Auguste, le premier empereur romain',
                        contenu: 'Auguste, de son vrai nom Octave, fut le premier empereur romain. Il mit fin aux guerres civiles et établit le principat, marquant le passage de la République à l\'Empire romain. Il régna de 27 av. J.-C. à 14 apr. J.-C.',
                        matiere: 'histoire',
                        sources: 'Histoire romaine - Suétone, Tacite'
                    },
                    {
                        id: 'geographie_capitales_canberra',
                        titre: 'Canberra, capitale de l\'Australie',
                        contenu: 'Canberra est la capitale de l\'Australie depuis 1927. Elle a été choisie comme compromis entre Sydney et Melbourne lors de la création de la Fédération australienne en 1901. La ville abrite le Parlement australien.',
                        matiere: 'geographie',
                        sources: 'Géographie australienne - Atlas national'
                    },
                    {
                        id: 'science_physique_lumiere',
                        titre: 'La vitesse de la lumière dans le vide',
                        contenu: 'La vitesse de la lumière dans le vide est de 299 792 458 mètres par seconde (environ 300 000 km/s). Cette constante fondamentale, notée c, est l\'une des bases de la relativité restreinte d\'Einstein.',
                        matiere: 'science',
                        sources: 'Physique moderne - Bureau international des poids et mesures'
                    },
                    {
                        id: 'litterature_classiques_voltaire',
                        titre: 'Voltaire et les Lumières',
                        contenu: 'Voltaire (1694-1778) fut l\'un des principaux philosophes des Lumières. Son œuvre "Candide" critique la société et la religion de son temps. Il défendit la liberté d\'expression et la tolérance.',
                        matiere: 'litterature',
                        sources: 'Histoire de la littérature française - André Lagarde et Laurent Michard'
                    },
                    {
                        id: 'art_peinture_mona_lisa',
                        titre: 'La Joconde de Léonard de Vinci',
                        contenu: 'La Joconde, peinte par Léonard de Vinci entre 1503 et 1519, est l\'une des œuvres les plus célèbres du monde. Ce portrait représente Lisa Gherardini, épouse de Francesco del Giocondo. Le mystère du sourire de Mona Lisa fascine depuis des siècles.',
                        matiere: 'art',
                        sources: 'Histoire de l\'art - Musée du Louvre'
                    },
                    {
                        id: 'musique_classique_beethoven',
                        titre: 'Ludwig van Beethoven',
                        contenu: 'Beethoven (1770-1827) fut l\'un des plus grands compositeurs de musique classique. Malgré sa surdité progressive, il composa des œuvres majeures comme la Symphonie n°9. Il marqua la transition entre le classicisme et le romantisme.',
                        matiere: 'musique',
                        sources: 'Histoire de la musique - Encyclopédie Universalis'
                    },
                    {
                        id: 'cinema_action_matrix',
                        titre: 'Matrix : révolution numérique',
                        contenu: 'Le film "Matrix" (1999) réalisé par les Wachowski explore les thèmes de la réalité virtuelle et de l\'intelligence artificielle. Le personnage de Neo, incarné par Keanu Reeves, découvre que le monde dans lequel il vit n\'est qu\'une simulation.',
                        matiere: 'cinema',
                        sources: 'Cinéma de science-fiction - Histoire du cinéma'
                    },
                    {
                        id: 'sport_football_coupe_du_monde',
                        titre: 'La Coupe du Monde de Football',
                        contenu: 'La Coupe du Monde de Football, organisée tous les 4 ans par la FIFA depuis 1930, est la compétition sportive la plus regardée au monde. Le Brésil détient le record de victoires avec 5 titres.',
                        matiere: 'sport',
                        sources: 'Histoire du football - FIFA'
                    }
                ];

                let added = 0;
                for (const card of cultureCards) {
                    try {
                        await db.collection('cultureCards').doc(card.id).set({
                            titre: card.titre,
                            contenu: card.contenu,
                            matiere: card.matiere,
                            sources: card.sources,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        added++;
                        status.textContent = `Ajouté ${added}/${cultureCards.length} fiches...`;
                    } catch (error) {
                        console.error('Erreur ajout fiche:', card.id, error);
                    }
                }

                status.textContent = `✅ ${added} fiches culture ajoutées avec succès !`;
                status.style.color = 'green';

            } catch (error) {
                console.error('Erreur initialisation:', error);
                status.textContent = '❌ Erreur lors de l\'initialisation: ' + error.message;
                status.style.color = 'red';
            }
        }
    </script>
</body>
</html>