<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="icon" type="image/png" sizes="32x32" href="Images/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="Images/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="Images/logo-192.png">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G3YEKJLDRT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-G3YEKJLDRT');
</script>
    <!-- Firebase SDK -->
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script defer src="firebase-config.js"></script>
    <script src="js/menu.js" defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperQuiz - Choix du mode</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .mode-container {
            max-width: 1000px;
            margin: 50px auto;
            padding: 20px;
        }
        
        .mode-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .mode-header h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .quiz-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 40px;
        }
        
        .quiz-info h2 {
            margin: 0;
            font-size: 1.8em;
        }
        
        .modes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .mode-card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            transition: height 0.3s ease;
        }
        
        .mode-card.classic::before {
            background: linear-gradient(90deg, #3498db, #2ecc71);
        }
        
        .mode-card.challenge::before {
            background: linear-gradient(90deg, #e74c3c, #f39c12);
        }
        
        .mode-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }
        
        .mode-card:hover::before {
            height: 100%;
            opacity: 0.1;
        }
        
        /* Style pour rendre tout cliquable */
        .mode-card:active {
            transform: translateY(-8px);
        }
        
        .mode-icon {
            font-size: 4em;
            text-align: center;
            margin-bottom: 20px;
            pointer-events: none;
        }
        
        .mode-title {
            font-size: 2em;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
            font-weight: bold;
            pointer-events: none;
        }
        
        .mode-description {
            color: #7f8c8d;
            text-align: center;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 25px;
            pointer-events: none;
        }
        
        .mode-features {
            list-style: none;
            padding: 0;
            margin: 25px 0;
            pointer-events: none;
        }
        
        .mode-features li {
            padding: 12px 0;
            border-bottom: 1px solid #ecf0f1;
            display: flex;
            align-items: center;
            font-size: 1.05em;
        }
        
        .mode-features li:last-child {
            border-bottom: none;
        }
        
        .mode-features li::before {
            content: 'âœ“';
            display: inline-block;
            width: 25px;
            height: 25px;
            background: #2ecc71;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            margin-right: 12px;
            font-weight: bold;
        }
        
        .mode-features.challenge li::before {
            background: #e74c3c;
        }
        
        .btn-select {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            color: white;
            pointer-events: none; /* Le bouton ne doit pas intercepter les clics */
        }
        
        .btn-select.classic {
            background: linear-gradient(135deg, #3498db, #2ecc71);
        }
        
        .btn-select.challenge {
            background: linear-gradient(135deg, #e74c3c, #f39c12);
        }
        
        .back-link {
            text-align: center;
            margin-top: 30px;
        }
        
        .back-link a {
            color: #3498db;
            text-decoration: none;
            font-size: 1.1em;
        }

        /* SÃ©lection de difficultÃ© */
        .difficulty-selection {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .difficulty-selection h3 {
            margin: 0 0 20px 0;
            color: #2c3e50;
            font-size: 1.3em;
        }

        .difficulty-options {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .difficulty-card {
            background: #f8f9fa;
            border: 3px solid #e9ecef;
            border-radius: 12px;
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .difficulty-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .difficulty-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            box-shadow: 0 3px 15px rgba(102, 126, 234, 0.3);
        }

        .difficulty-card[data-difficulty="facile"].selected {
            border-color: #2ecc71;
            background: rgba(46, 204, 113, 0.1);
        }

        .difficulty-card[data-difficulty="moyen"].selected {
            border-color: #f39c12;
            background: rgba(243, 156, 18, 0.1);
        }

        .difficulty-card[data-difficulty="difficile"].selected {
            border-color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
        }

        .difficulty-icon {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .difficulty-name {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
        }

        .difficulty-desc {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .modes-grid {
                grid-template-columns: 1fr;
            }

            .difficulty-options {
                flex-direction: column;
                align-items: center;
            }

            .difficulty-card {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <main>
        <div class="mode-container">
            <div class="mode-header">
                <h1>âš¡ Choisis ton mode de jeu</h1>
                <p>Comment veux-tu jouer aujourd'hui ?</p>
            </div>

            <div class="quiz-info" id="quiz-info">
                <h2>Chargement...</h2>
            </div>

            <!-- SÃ©lection de difficultÃ© -->
            <div class="difficulty-selection">
                <h3>ğŸ“Š Choisis ta difficultÃ©</h3>
                <div class="difficulty-options">
                    <div class="difficulty-card selected" data-difficulty="all" onclick="selectDifficulty('all')">
                        <div class="difficulty-icon">ğŸ²</div>
                        <div class="difficulty-name">Toutes</div>
                        <div class="difficulty-desc">Mix de toutes les difficultÃ©s</div>
                    </div>
                    <div class="difficulty-card" data-difficulty="facile" onclick="selectDifficulty('facile')">
                        <div class="difficulty-icon">ğŸŸ¢</div>
                        <div class="difficulty-name">Facile</div>
                        <div class="difficulty-desc">Questions accessibles</div>
                    </div>
                    <div class="difficulty-card" data-difficulty="moyen" onclick="selectDifficulty('moyen')">
                        <div class="difficulty-icon">ğŸŸ¡</div>
                        <div class="difficulty-name">Moyen</div>
                        <div class="difficulty-desc">Un peu plus corsÃ©</div>
                    </div>
                    <div class="difficulty-card" data-difficulty="difficile" onclick="selectDifficulty('difficile')">
                        <div class="difficulty-icon">ğŸ”´</div>
                        <div class="difficulty-name">Difficile</div>
                        <div class="difficulty-desc">Pour les experts !</div>
                    </div>
                </div>
            </div>

            <div class="modes-grid">
                <!-- Mode Classique - TOUTE LA CARTE EST CLIQUABLE -->
                <div class="mode-card classic" onclick="selectMode('classic')">
                    <div class="mode-icon">ğŸ¯</div>
                    <div class="mode-title">Mode Classique</div>
                    <div class="mode-description">
                        Prends ton temps et rÃ©ponds tranquillement. Parfait pour apprendre !
                    </div>
                    <ul class="mode-features">
                        <li>Pas de limite de temps</li>
                        <li>Aucune pression</li>
                        <li>IdÃ©al pour rÃ©viser</li>
                        <li>Score simple (bonnes rÃ©ponses)</li>
                    </ul>
                    <button class="btn-select classic">
                        Jouer en mode Classique
                    </button>
                </div>

                <!-- Mode DÃ©fi - TOUTE LA CARTE EST CLIQUABLE -->
                <div class="mode-card challenge" onclick="selectMode('challenge')">
                    <div class="mode-icon">ğŸ”¥</div>
                    <div class="mode-title">Mode DÃ©fi</div>
                    <div class="mode-description">
                        Teste ta rapiditÃ© ! Mais attention : prends le temps de bien lire (min. 12s) !
                    </div>
                    <ul class="mode-features challenge">
                        <li>ChronomÃ¨tre global visible â±ï¸</li>
                        <li>Points bonus de rapiditÃ©</li>
                        <li>12-15s = +50 pts ğŸ†</li>
                        <li>16-20s = +30 pts ğŸ¥‡</li>
                        <li>21-25s = +20 pts ğŸ¥ˆ</li>
                        <li>26-30s = +10 pts ğŸ¥‰</li>
                        <li>< 12s ou > 30s = 0 bonus</li>
                    </ul>
                    <button class="btn-select challenge">
                        Relever le DÃ©fi ! ğŸ”¥
                    </button>
                </div>
            </div>

            <div class="back-link">
                <a href="#" id="back-link">â† Retour</a>
            </div>
        </div>
    </main>

    <footer>
        <p>Copyright Â© 2024 SuperQuiz. Tous droits rÃ©servÃ©s.</p>
    </footer>

    <script src="js/script.js"></script>
    <script>
        // RÃ©cupÃ©rer les paramÃ¨tres de l'URL
        const urlParams = new URLSearchParams(window.location.search);
        const matiere = urlParams.get('matiere');
        const categorie = urlParams.get('categorie');
        
        // DifficultÃ© sÃ©lectionnÃ©e (par dÃ©faut : toutes)
        let selectedDifficulty = 'all';

        // Fonction pour sÃ©lectionner la difficultÃ©
        function selectDifficulty(difficulty) {
            selectedDifficulty = difficulty;
            
            // Mettre Ã  jour l'affichage
            document.querySelectorAll('.difficulty-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`.difficulty-card[data-difficulty="${difficulty}"]`).classList.add('selected');
        }

        // Noms des catÃ©gories pour l'affichage
        const categoriesNoms = {
            'histoire': {
                'antiquite': 'ğŸ›ï¸ AntiquitÃ©',
                'moyenage': 'âš”ï¸ Moyen Ã‚ge',
                'art': 'ğŸ¨ Histoire de l\'Art',
                'guerres': 'âš¡ Guerres Mondiales',
                'france': 'ğŸ‡«ğŸ‡· Histoire de France',
                'contemporaine': 'ğŸ“± Histoire Contemporaine'
            },
            'geographie': {
                'capitales': 'ğŸ›ï¸ Capitales du Monde',
                'france': 'ğŸ‡«ğŸ‡· GÃ©ographie de France',
                'europe': 'ğŸ‡ªğŸ‡º Europe',
                'continents': 'ğŸŒ Continents & OcÃ©ans',
                'nature': 'ğŸ”ï¸ GÃ©ographie Physique',
                'culture': 'ğŸ­ GÃ©ographie Culturelle'
            },
            'science': {
                'physique': 'âš›ï¸ Physique',
                'chimie': 'ğŸ§ª Chimie',
                'biologie': 'ğŸ§¬ Biologie',
                'astronomie': 'ğŸŒŒ Astronomie',
                'mathematiques': 'ğŸ“ MathÃ©matiques',
                'technologie': 'ğŸ’» Technologie'
            },
            'litterature': {
                'classiques': 'ğŸ“š Classiques FranÃ§ais',
                'poesie': 'âœï¸ PoÃ©sie',
                'theatre': 'ğŸ­ ThÃ©Ã¢tre',
                'romans': 'ğŸ“– Romans du XXe siÃ¨cle',
                'mondiale': 'ğŸŒ LittÃ©rature Mondiale',
                'contemporaine': 'ğŸ“± LittÃ©rature Contemporaine'
            },
            'sport': {
                'football': 'âš½ Football', 'basketball': 'ğŸ€ Basketball', 'tennis': 'ğŸ¾ Tennis',
                'athletisme': 'ğŸƒ AthlÃ©tisme', 'natation': 'ğŸŠ Natation', 'jeux-olympiques': 'ğŸ… Jeux Olympiques'
            },
            'musique': {
                'classique': 'ğŸ» Musique Classique', 'rock': 'ğŸ¸ Rock & Pop', 'jazz': 'ğŸ· Jazz & Blues',
                'rap': 'ğŸ¤ Rap & Hip-Hop', 'monde': 'ğŸŒ Musiques du Monde', 'theorie': 'ğŸ¼ ThÃ©orie Musicale'
            },
            'cinema': {
                'action': 'ğŸ’¥ Action & Aventure', 'comedie': 'ğŸ˜‚ ComÃ©die', 'drame': 'ğŸ­ Drame',
                'sf': 'ğŸ‘½ Science-Fiction', 'animation': 'ğŸ¨ Animation', 'classiques': 'ğŸ¬ Classiques'
            },
            'art': {
                'peinture': 'ğŸ¨ Peinture', 'sculpture': 'ğŸ—¿ Sculpture', 'architecture': 'ğŸ›ï¸ Architecture',
                'moderne': 'ğŸ–¼ï¸ Art Moderne', 'photo': 'ğŸ“· Photographie', 'histoire': 'ğŸ“œ Histoire de l\'Art'
            },
            'culture': {
                'gastronomie': 'ğŸ½ï¸ Gastronomie', 'traditions': 'ğŸ Traditions', 'mythologie': 'âš¡ Mythologie',
                'langues': 'ğŸ—£ï¸ Langues', 'philo': 'ğŸ¤” Philosophie', 'celebrites': 'ğŸŒŸ CÃ©lÃ©britÃ©s'
            }
        };

        // Afficher les informations du quiz
        function displayQuizInfo() {
            const quizInfoDiv = document.getElementById('quiz-info');
            const backLink = document.getElementById('back-link');
            
            if (matiere && categorie) {
                const categorieName = categoriesNoms[matiere]?.[categorie] || categorie;
                const matiereName = matiere.charAt(0).toUpperCase() + matiere.slice(1);
                
                quizInfoDiv.innerHTML = `
                    <h2>Quiz : ${categorieName}</h2>
                    <p>MatiÃ¨re : ${matiereName}</p>
                `;
                
                backLink.href = `${matiereName}.html`;
            } else {
                quizInfoDiv.innerHTML = '<h2>âš ï¸ Quiz non spÃ©cifiÃ©</h2>';
                backLink.href = 'Quiz.html';
            }
        }

        // SÃ©lectionner un mode - FONCTION APPELÃ‰E PAR LE CLIC SUR TOUTE LA CARTE
        function selectMode(mode) {
            if (!matiere || !categorie) {
                alert('Erreur : paramÃ¨tres de quiz manquants');
                return;
            }

            console.log(`âœ… Mode sÃ©lectionnÃ© : ${mode}, DifficultÃ© : ${selectedDifficulty}`);

            // Rediriger vers le quiz avec le mode et la difficultÃ© sÃ©lectionnÃ©s
            let url = `quiz-dynamique.html?matiere=${matiere}&categorie=${categorie}&mode=${mode}`;
            if (selectedDifficulty !== 'all') {
                url += `&difficulty=${selectedDifficulty}`;
            }
            window.location.href = url;
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            displayQuizInfo();
            
            // Gestion du menu d'authentification
            const nav = document.querySelector('.menu');
            const authItem = document.createElement('li');
            authItem.id = 'auth-menu-item';
            
            const sessionStr = localStorage.getItem('session:current');
            if (sessionStr) {
                const session = JSON.parse(sessionStr);
                if (session.connected) {
                    authItem.innerHTML = `<a href="#" onclick="logout(event)" style="color: #2ecc71;">ğŸ‘¤ ${session.name}</a>`;
                    nav.appendChild(authItem);
                    return;
                }
            }
            
            authItem.innerHTML = '<a href="Auth.html" style="color: #e74c3c;">ğŸ” Connexion</a>';
            nav.appendChild(authItem);
        });

        function logout(event) {
            event.preventDefault();
            if (confirm('Voulez-vous vraiment vous dÃ©connecter ?')) {
                localStorage.removeItem('session:current');
                window.location.href = 'Accueil.html';
            }
        }
    </script>
</body>
</html>